<!doctype html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Yeni Ã–ÄŸrenci AffÄ± (2018 SonrasÄ±)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="bilgi alert alert-danger w-25 border border-danger" style="display: none">KopyalandÄ±</div>

<div class="container">
    <div class="row">
        <div class="col twitsContainer">
            <h1 class="mb-5">Yeni Ã–ÄŸrenci AffÄ± (2018 SonrasÄ±) SayfasÄ±</h1>

            <h2 class="mb-4">Ã–rnek Twitler</h2>
            <div class="mb-2">
                <h3>Hashtagler ne olsun?</h3>
                <p class="text-primary">AralarÄ±nda boÅŸluk bÄ±rakarak yazÄ±n. Hashtagler metinlerin sonuna otomatik eklenecektir.</p>
                <strong>Hashtagler:</strong> <input id="hashtagBox" class="form-control d-inline-block" type="text" value="#Ã¶ÄŸrenciaffÄ± #yeniÃ¶ÄŸrenciaffÄ±">
            </div>
            <div class="textareaContainer">

            </div>

        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.js"></script>
<script>
    window.addEventListener("load", function () {
        console.log("Page loaded..");

        function htmlToElement(html) {
            let template = document.createElement('template');
            html = html.trim(); // Never return a text node of whitespace as the result
            template.innerHTML = html;
            return template.content.firstChild;
        }

        function copyText(copyText) {
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
        }

        function findHashtags(searchText) {
            return searchText.split(' ').filter( v=> v.startsWith('#') );
        }

        function removeAllChildNodes(parent) {
            while (parent.firstChild) {
                parent.removeChild(parent.firstChild);
            }
        }

        function renderTextAreas(hashtags) {

            let buttonHtml = `<button type="button" class="btn btn-dark">
                    <i class="bi bi-clipboard"></i>
                    Kopyala
                </button>`;

            let shareHtml = `<a href="" class="btn btn-primary ms-2">
                    <i class="bi bi-twitter"></i>
                    Twitle
                </a>`;

            let twits = [
                "Ailevi nedenlerle yarÄ±da bÄ±raktÄ±ÄŸÄ±mÄ±z egitimlerimize dÃ¶nmek icin Ã¶ÄŸrenci affÄ±na desteklerinizi arz ederiz.",
                "COVID-19, maddi imkansÄ±zlÄ±klar ve ailevi sebeplerden dolayÄ± eÄŸitimini yarÄ±m bÄ±rakmak zorunda kalan genÃ§leriz. 750 bin genÃ§ ve ailesi iÃ§in destek bekliyoruz.",
                "Lisans, yÃ¼ksek lisans, doktora gibi eÄŸitim aÅŸamalarÄ±nda terÃ¶r dÄ±ÅŸÄ± nedenlerle iliÅŸiÄŸi kesilen 750bin kiÅŸiyiz. LÃ¼tfen sesimizi duyun, duyurun.",
                "Ã–ÄŸrenci affÄ±yla ilgili geliÅŸmeleri bekliyoruz. Bu dÃ¶nem okulda olmak istiyoruz. 700 bin kiÅŸiyiz. Ailelerimizle milyonlarca yÃ¼rek dua ediyoruz.",
                "750bin genÃ§ ise hayatÄ±n yÃ¼kÃ¼nÃ¼ sÄ±rtlandÄ±ÄŸÄ± iÃ§in eÄŸitim hayatÄ±na ara verdi. LÃ¼tfen okullarÄ±mÄ±za dÃ¶nÃ¼ÅŸ biletini kesin efendimğŸ™",
                "Bu genÃ§lerin tek suÃ§u, eÄŸitimini dÃ¼ÅŸÃ¼k yaÅŸam standartlarÄ± altÄ±nda tamamlamaya Ã§alÄ±ÅŸmaktÄ±, olmadÄ±.ğŸ˜” LÃ¼tfen sesimizi CumhurbaÅŸkanÄ±mÄ±za duyurunğŸ™",
                "Halden anlarsa siz anlarsÄ±nÄ±z, genÃ§lerin elini tutarsa siz tutarsÄ±nÄ±zğŸ™",
                "Herkes yerinde ve zamanÄ±nda olmasÄ± gerekeni yapmÄ±ÅŸken; bizler boynumuza yÃ¼klenen yÃ¼kÃ¼n altÄ±nda ezilip bir yandan da okulumuzu bu gÃ¼Ã§ ÅŸartlar altÄ±nda tamamlamaya Ã§alÄ±ÅŸtÄ±k, OLMADI!",
                "Hayat ÅŸartlarÄ±na direnirken bir yandan da eÄŸitimi tamamlamak iÃ§in gayret vermek ne demek ÅŸahit olmak bile istemezsinizğŸ™",
                "Bir tÃ¼rlÃ¼ Ã¶ÄŸrenciliÄŸimizi mÃ¼cbir sebeplerden Ã¶tÃ¼rÃ¼ tamamlayamadÄ±k. Emin olunuz; Ã§ocukluÄŸun tadÄ±nÄ±, Ã¶ÄŸrencilik hayatÄ±nÄ±, meslek sahibi olmanÄ±n gururunu, yuva kurmayÄ± kimse Ã¶telemek istemezğŸ™",
                "Bu derde Ã§are lazÄ±m, dermanÄ± sizde susmak olmaz!",
                "Bizler baÅŸarÄ±sÄ±z Ã¶ÄŸrenci deÄŸiliz; yaÅŸam mÃ¼cadelesine ansÄ±zÄ±n yakalanÄ±p, eÄŸitimine ara vermiÅŸ genÃ§leriz.",
                "750bin Ã¶ÄŸrenci AF bekliyor. Sesimiz duyulmuyorğŸ™",
                "Ã–ÄŸrenciaffÄ± bekleyen Ã¶ÄŸrencilerin Ã§oÄŸunluÄŸunu; pandemi ve zorlu hayat koÅŸullarÄ±nda hayatÄ±nÄ± idame ettiren genÃ§ler oluÅŸturuyor.ğŸ™",
                "Keyfiyetten deÄŸil; mecburiyetten ara verdiÄŸimiz eÄŸitimlerimizi tamamlamak istiyoruzğŸ™",
                "Her ÅŸey yoluna girdi derken; bÃ¼yÃ¼klerimiz affÄ± Ã§ok gÃ¶rmesinğŸ™",
                "KaldÄ±ÄŸÄ±mÄ±z yerden eÄŸitimimizi tamamlamamÄ±za mÃ¼sade edinğŸ™",
                "MÃ¼cbir sebeplerden Ã¶tÃ¼rÃ¼ okulunu Ã¶teleyip ve ya bÄ±rakmak zorunda kalan genÃ§lere kulak verinğŸ™",
                "YarÄ±m kalan eÄŸitimlerimizi tamamlamak iÃ§in bÃ¼yÃ¼klerimizin elimizden tutmasÄ±nÄ± bekliyoruz ğŸ™",
                "Ã–ÄŸrenciAFFI iÃ§in 3 yÄ±ldÄ±r mÃ¼jdenizi bekliyoruz. Takatimiz kalmadÄ±ğŸ™",
                "COVID-19, maddi imkansÄ±zlÄ±klar ve ailevi sebeplerden dolayÄ± eÄŸitimini yarÄ±m bÄ±rakmak zorunda kalan genÃ§leriz. 750bin genci sevindirecek haberlerinizi bekliyoruzğŸ™",
                "750bin Ã¶ÄŸrenci AF bekliyor. Sesimiz duyulmuyorğŸ˜”",
                `Ufak bir hendeÄŸi geÃ§emez olduk
Bir bardak soÄŸuk su iÃ§emez olduk
Elimizden tutacak bir isim bulamaz oldukğŸ˜”`,
                "800BÄ°N gencin geleceÄŸine dokunacak bir el bekliyoruzğŸ™",
                "Ã–ÄŸrenciaffÄ± iÃ§in genÃ§lerin yanÄ±nda gÃ¶rmek istiyoruz sizi baÅŸkanÄ±mğŸ™",
                "GenÃ§lerin umudu gÃ¼nden gÃ¼ne tÃ¼keniyor. Telafisi olmayan yÄ±llarÄ±n piÅŸmanlÄ±ÄŸÄ±na ortak olmayÄ±n lÃ¼tfen. Bu zor sÃ¼reÃ§te 800BÄ°N gencin kalbini incitmeyin. Ä°vedi bir ÅŸekilde iÃ§in gerekli Ã§alÄ±ÅŸmalara Ã¶n ayak olunğŸ™",
                "BÃ¼yÃ¼klerimizden istirham ediyoruz; evlatlarÄ±nÄ±za sahip Ã§Ä±kÄ±nğŸ™"
            ];

            let textContainer = document.querySelector('.textareaContainer');
            removeAllChildNodes(textContainer);

            for (let i = 0; i < twits.length; i++) {
                // let clone = inputGroup.cloneNode(true);
                // clone.querySelector('textarea').value = twits[i];
                // twitsContainer.appendChild(clone);

                let newTwitContainer = document.createElement('div');
                newTwitContainer.className = "input-group w-100 my-3";
                let newText = document.createElement('textarea');
                newText.className = "form-control w-75 text-muted";
                newText.value = twits[i] + " " + hashtags;
                newTwitContainer.appendChild(newText);

                //add copy button
                let buttonElem = htmlToElement(buttonHtml);
                buttonElem.addEventListener("click", (e)=>{
                    e.preventDefault();
                    copyText(e.target.previousSibling);
                    $(".bilgi").fadeIn().fadeOut(1000);
                });
                newTwitContainer.appendChild(buttonElem);

                //add twitter share link
                let shareElem = htmlToElement(shareHtml);
                let hashTags = findHashtags(hashtags);
                var uniq = hashTags
                    .map((name) => {
                        name = name.replace( /^#+|#+$/g, '' );
                        return {count: 1, name: name}
                    })
                    .reduce((a, b) => {
                        a[b.name] = (a[b.name] || 0) + b.count;
                        return a;
                    }, {})

                let sorted = Object.keys(uniq).sort((a, b) => uniq[a] < uniq[b])
                let hashtagsMerged = "";
                sorted.forEach(value => {
                    hashtagsMerged = hashtagsMerged + "," + value;
                })
                hashtagsMerged = hashtagsMerged.replace( /^,+|,+$/g, '');
                //console.log(hashtagsMerged)

                shareElem.href = 'https://twitter.com/intent/tweet?text=' + twits[i] + '&hashtags=' + hashtagsMerged;
                shareElem.target = '_blank';
                newTwitContainer.appendChild(shareElem);

                textContainer.appendChild(newTwitContainer);
            }
        }

        let hashtags = document.querySelector("#hashtagBox").value;
        renderTextAreas(hashtags);

        document.querySelector("#hashtagBox").addEventListener('keyup', (e)=>{
            renderTextAreas(e.target.value);
        })
    })
</script>
</body>
</html>